<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=10">
<title>上传图例</title>
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport">
<link rel="stylesheet" href="dist/js/pager/pager.css">
<link rel="stylesheet" href="vince/css/vince.css">
<link rel="stylesheet" href="vince/biao/css/font-awesome.min.css">
<link rel="stylesheet" href="vince/css/styles.imageuploader.css">
<style type="text/css">
.info_text {
	padding: 10px;
}
</style>
</head>
<body class="hold-transition skin-blue sidebar-mini">

	<div class="fuceng">
		<div class="fuqu">
			<div class="fuquzone">
				<div class="fuqulogo"></div>
				<p class="fuqutitle">
					图例信息 <span class="fuclose">×</span>
				</p>
				<div class="equiform" id="equipForm">
					<form action="#" id="outerForm">
						<table id="equiInfoTable">
							<tr class="normal">
								<td class="info_text">分组：</td>
								<td><select class="biaoti_select">
										<option value="1">自定义</option>
										<option value="2">基本</option>
										<option value="3">高级</option>
								</select></td>
								<td class="info_text"></td>
							</tr>
						</table>

					</form>
				</div>
				<section role="main" class="l-main"
					style="margin-top: 50px; margin-bottom: 50px;">
					<div class="uploader__box js-uploader__box l-center-box">
						<form action="#" method="POST">
							<div class="uploader__contents">
								<label class="button button--secondary" for="fileinput">请选择文件</label>
								<input id="fileinput" class="uploader__file-input" type="file"
									multiple value="Select Files">
							</div>
							<input class="button button--big-bottom" type="submit"
								value="Upload Selected Files">
						</form>
					</div>
				</section>

			</div>
		</div>
	</div>

	<div class="wrapper">
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<h1>上传图例</h1>
				<ol class="breadcrumb">
					<li><a href="#"><i class="fa fa-dashboard"></i>首页</a></li>
					<li class="active">上传图例</li>
				</ol>
			</section>
			<!-- Main content -->
			<section class="content">
				<div class="row">
					<div class="col-xs-12">
						<div class="box">
							<div class="box-header">
								<div>
									<p>
										<span class="float_left"><span>图例名：</span><input
											type="text" id="searchByName"></span> <span
											style="margin-top: 20px;"> 分组： <select
											class="biaoti_select">
												<option value="1">自定义</option>
												<option value="2">基本</option>
												<option value="3">高级</option>
										</select>
										</span><span class="float_right" style="margin-right: 70%;"> <input
											type="button" onclick="searchResult();" value="查询"
											class="in_sub">
										</span>
									<div class="clear"></div>

								</div>
							</div>
							<div class="box-body">
								<table id="example1" class="table table-bordered table-striped">
									<thead>
										<tr>
											<td>序号</td>
											<td>图例</td>
											<td>名称</td>
											<td>路径</td>
											<td>分组</td>
											<td>大小</td>
											<td>设计者</td>
											<td>上传时间</td>
											<td>操作</td>
										</tr>
									</thead>
									<tbody>
									<tbody id="imageList"></tbody>
									<tr>
										<td colspan="9" class="text_al_rig lindianjia"><input
											type="submit" value="添加图例" class="anniu lindianjia"></td>
									</tr>
									<tr></tr>
									</tbody>
								</table>
								<!-- 分页插件 -->
								<div>
									<div class="list-page-tail page-down" id="image-show-pager"
										style="margin: auto;"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
		<div class="control-sidebar-bg"></div>
	</div>
	<!-- ./wrapper -->
	<script type="text/javascript" src="vince/js/bootstable.js"></script>
	<script type="text/javascript" src="vince/js/demo.js"></script>
	<script src="dist/js/pager/data_table_pager.js"></script>
	<script type="text/javascript">
		jQuery(document).ready(function() {
			//getImageList();
		});
		var globalResult;
		//获取用户列表
		function getImageList() {
			$
					.ajax({
						url : "image/selectAll",
						type : "post",
						dataType : "json",
						success : function(result) {
							globalResult = result;
							var imagelist = "";
							//设置分页信息——当前为假分页
							var totalSize = result.length;
							var pageSize = 10;
							var totalNum = Math.ceil(totalSize / pageSize);
							var startIndex = (pageNum - 1) * pageSize;
							var endIndex = (pageNum * pageSize > totalSize) ? totalSize
									: pageNum * pageSize;
							for (let i = startIndex; i < endIndex; i++) {
								userlist += "<tr class=\"\">";
								userlist += "<td>" + (i + 1) + "</td>";
								userlist += "<td><img src=\""+ result[i].path +"\" width=\"50\"></td>";
								userlist += "<td>" + result[i].name + "</td>";
								userlist += "<td>" + result[i].path + "</td>";
								userlist += "<td>" + result[i].group + "</td>";
								userlist += "<td>" + result[i].size + "</td>";
								userlist += "<td>" + result[i].author + "</td>";
								userlist += "<td>" + result[i].updateTime + "</td>";
								userlist += "<td class=\"center\" >";
								userlist += "<a class=\" edit\" onclick=\"getImageEdit('"
										+ result[i].id + "');\">编辑</a>&nbsp;";
								userlist += "<a class=\"delete\" href=\"#\" onclick=\"getImageDelete('"
										+ result[i].id + "');\">删除</a>&nbsp;";
								userlist += "</td>";
								userlist += "</tr>";
							}
							$("#imageList").html(userlist);
							//加载页码
							$("#image-show-pager").html(
									loadPages(pageSize, totalSize, pageNum));
							$("#image-show-pager").setActivePage(4);
						}
					});
		}
		//删除
		function getUserDelete(param) {
			if (confirm("确定删除此图例？")) {
				$.ajax({
					url : "image/delete",
					type : "post",
					data : {
						"imageId" : param
					},
					dataType : "json",
					success : function(result) {
						if (result.success) {
							alert("删除成功！");
						} else {
							alert("删除失败！");
						}
						getImageList();
					}
				});
			}
		}
	</script>
	<script src="dist/js/app.min.js"></script>
	<script src="vince/js/jquery.imageuploader.js" type="text/javascript"></script>
	<script type="text/javascript">
		(function() {
			var options = {};
			$('.js-uploader__box').uploader({
				'selectButtonCopy' : '请选择或拖拽文件',
				'instructionsCopy' : '',
				'submitButtonCopy' : '上传选择的文件',
				'furtherInstructionsCopy' : '你可以选择或拖拽更多的文件',
				'secondarySelectButtonCopy' : '选择更多的文件',
			});
		}());
	</script>
</body>
</html>

