<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>数据监测</title>
		<style type="text/css">
			#setValue{font-size: 18px; text-align: center; background-color: #28b779; border: 1px; padding: 5px; color: #FFFFFF;}
		</style>
	</head>
	<body class="page-content">
		<div class="container-fluid">
			<!-- 页面标题和导航【开始】-->
			<div class="row-fluid">
				<div class="span12">
					<h3 class="page-title">数据监测&nbsp;<small>此功能用于展示设备的应用数据</small></h3>
					<!--导航-->
					<ul class="breadcrumb">
						<li>
							<i class="icon-home"></i>
							<a href="#">首页</a>
							<span class="icon-angle-right"></span>
						</li>
						<li>
							<a href="#">数据监测</a>
						</li>
					</ul>
				</div>
			</div>
			<!-- 页面标题和导航【结束】-->
			<!--监测的温度数据信息【开始】-->
			<div class="row-fluid">
				<div class="tabbable tabbable-custom tabbable-full-width">
					<!--标签行【开始】-->
					<ul class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#tab_3_1">当前监测数据</a></li>
						<li><a data-toggle="tab" href="#tab_3_2">历史监测数据</a></li>
						<li><a data-toggle="tab" href="#tab_3_3">异常数据汇总</a></li>
					</ul>
					<!--标签行【结束】-->
					<!--所有标签内容【开始】-->
					<div class="tab-content">
						<!--加载当前的设备基本信息【开始】-->
						<div class="responsive"style="height: 50px; width: 1220px; margin: 0 0 0 80px; padding: 10px 0; background-color: #27A9E3;">
							<table id="equiSource" style="width: 80%; margin: 15px auto; font-size: 20px; text-align: center;">
									<tr>
										<td>设备名称：设备一</td>
										<td>所属企业：XXX公司</td>
										<td>安装地：陕西省西安市</td>
										<td>
											<button id="setValue">设置通道温度值域</button>
										</td>
									</tr>
							</table>
						</div>
						<!--加载当前的设备基本信息【结束】-->
						<!--当前设备各通道监测温度表【开始】-->
						<div id="tab_3_1" class="tab-pane active">
							<div id="channels" class="row-fluid" style="padding: 2% 5% 0% 5%;">
								<!--展示各个通道的数据-->
								<!-- 单一通道【开始】 -->
								<div class="span3 responsive" data-tablet="span6" data-desktop="span3">
									<div class="dashboard-stat center">
										<div class="details">
											<!-- 通道设置的温度上限【开始】 -->
											<div class="number resetTempValue" style="display: none;">温度上限：
												<b>20.0</b>&nbsp;℃
											</div>
											<!-- 通道设置的温度上限【结束】 -->
											<!-- 通道当前的温度监测数据【开始】 -->
											<div class="number">通道一：
												<b class="color-alert">23.5</b>&nbsp;℃
											</div>
											<!-- 通道当前的温度监测数据【结束】 -->
											<!-- 通道设置的温度下限【开始】 -->
											<div class="number resetTempValue" style="display: none;">温度下限：
												<b>30.0</b>&nbsp;℃
											</div>
											<!-- 通道设置的温度下限【结束】 -->
										</div>
									</div>
								</div>
								<!-- 单一通道【结束】 -->
								
								<div class="span3 responsive" data-tablet="span6" data-desktop="span3">
									<div class="dashboard-stat center">
										<div class="details">
											<div class="number">通道二：
												<b class="color-alert">33.5</b>&nbsp;℃
											</div>
										</div>
									</div>
								</div>
								
								<div class="span3 responsive" data-tablet="span6" data-desktop="span3">
									<div class="dashboard-stat center">
										<div class="details">
											<div class="number">通道三：
												<b class="color-alert">56.0</b>&nbsp;℃
											</div>
										</div>
									</div>
								</div>
								
							</div>
						</div>
						<!--当前设备各通道监测温度表【结束】-->	
						<!--当前设备各通道历史监测温度表【开始】-->
						<div id="tab_3_2" class="tab-pane">
							<!--历史数据统计图【开始】-->
							<div class="row-fluid">
								<div class="span10 responsive" data-tablet="span6" data-desktop="span10">
									<!--<div id="line-chart" style="width: 800px; height: 500px;"></div>-->
									<div id="line-chart" style="width: 1200px; height: 500px; margin: 20px auto;"></div>
								</div>
							</div>
							<!--历史数据统计图【结束】-->
						</div>
						<!--当前设备各通道历史监测温度表【结束】-->
						<!--异常数据【开始】-->
						<div id="tab_3_3" class="tab-pane" style="width: 1220px; padding: 20px 0 0 80px;">
							<div class="clearfix">
								<!--便捷操作工具栏【开始】-->
								<div class="btn-group pull-right">
									<button class="btn dropdown-toggle" data-toggle="dropdown">更多操作<i class="icon-angle-down"></i>
									</button>
									<ul class="dropdown-menu pull-right">
										<li><a href="#">打印</a></li>
										<li><a href="#">保存为PDF</a></li>
										<li><a href="#">导出到Excel</a></li>
									</ul>
								</div>
							</div>
							<!--便捷操作工具栏【结束】-->
						</div>
						<!--异常数据【结束】-->
					</div>
					<!--所有标签内容【结束】-->
				</div>
			</div>
			<!--监测的温度数据信息【结束】-->
		</div>
		<!--引入JS文件【开始】-->
		<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
		<!--页面JS-->
		<script src="media/js/app.js"></script>
		<script src="media/js/search.js"></script>
		<!--图表JS-->
		<script src="js/echarts.min.js"></script>
		<script src="js/charts.js"></script>
		<!--在线表格JS-->
		<script type="text/javascript" src="media/js/jquery.dataTables.js"></script>
		<script type="text/javascript" src="media/js/DT_bootstrap.js"></script>
		<script src="media/js/table-editable.js"></script>
		<!--引入JS文件【结束】-->
		<script>
			//初始化界面
			jQuery(document).ready(function() {
			   Search.init();
			});
			var equiId=menuId.trim();			/* 获取全局变量——设备主键 */
			//通过设备主键，获取设备基本信息【开始】
			/* $.ajax({
				url:"equi/getEquiDetailById",
				type:"post",
				data:{"equiId": equiId},
				dataType: "json",
				success: function(data){
					
					var content = "<tr>";
					content+="<td>设备名称："+data.equiName+"</td>";
					content+="<td>所属企业："+data.belongCompany+"</td>";
					content+="<td>安装地："+data.equiPosition+"</td>";
					content+="</tr>";
					$("#equiSource").append(content);
				}
			}); */
			//通过设备主键，获取设备基本信息【结束】
			//tab1：通过颜色，对获取的温度做简单的预警【开始】
			jQuery(document).ready(function() {
				var target = document.getElementsByClassName("color-alert");
				$.each(target, function(i, v) {
					let tem = parseFloat($(this).text())
					if(tem > 20 && tem <= 30){
						$(this).parent().parent().parent().addClass("green");
					}else if(tem > 30 && tem <= 50){
						$(this).parent().parent().parent().addClass("yellow");
					}else{
						$(this).parent().parent().parent().addClass("red");
					}
				});
				
			});
			//tab1：通过颜色，对获取的温度做简单的预警【结束】
			//tab2：绘制折线图【开始】
			var lineChart = echarts.init(document.getElementById("line-chart"));
			lineChart.setOption(lineOption);
			//异步获取数据
			/* $.ajax({
				url:"equi/getEquiData",
				type:"post",
				data:{"equiId": equiId},
				dataType: "json",
				success: function(data){
				var Xparam, Yparam;
					var series = [];
					$.each(data, function(index, value){
						var serie = new Object();
						serie.name=value;
						serie.data=value;
					});
					lineChart.setOption({
						xAxis: {data: ['time1', 'time2', 'time3', 'time4', 'time5', 'time6'] },
						legend: {data:['通道一','通道二','通道三','通道四','通道五','通道六'] },
						series: series
					}});
				}
			}); */
			//tab2：绘制折线图【结束】
			//tab3：加载异常数据表【开始】
			/* $.ajax({
				url:"equi/getEquiAbnormalData",
				type:"post",
				data:{"equiId": equiId},
				dataType: "json",
				success: function(data){
					
				}
			}); */
			var table = "<table class=\"table table-striped table-hover table-bordered\" id=\"sample_editable_1\">";
			table+="<thead><tr>";
			table+="<th>时间</th><th>异常通道</th><th>异常数值</th><th>异常类型</th><th>其它</th>";
			table+="</tr></thead>";
			table+="<tbody>";
			for(var i=0; i<20; i++){
				table+="<tr>";
				table+="<td>000</td>";
				table+="<td>通道"+i+"</td>";
				table+="<td>100</td>";
				table+="<td>超高温</td>";
				table+="<td>待处理</td>";
				table+="</tr>";
			}
			table+="</tbody>";
			table+="</table>";
			$("#tab_3_3").append(table);
			TableEditable.init();
			//tab3：加载异常数据表【结束】
		</script>
		
	</body>
</html>
