<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<body class="hold-transition skin-blue sidebar-mini">
	<div class="wrapper">
		<div class="content-wrapper">
			<section class="content-header">
				<h1>系统参数设置</h1>
				<ol class="breadcrumb">
					<li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
					<li class="active">系统参数设置</li>
				</ol>
			</section>

			<!-- Main content -->
			<section class="content">
				<div class="row">
					<div class="col-md-6">
						<div class="box box-primary">
							<!-- /.box-header -->
							<div class="box-body">
								<form role="form">
									<div class="form-group">
										<label>浮动飘窗</label> <select id="FLOAT_WINDOW"
											class="form-control" onchange="setSystem('FLOAT_WINDOW')">
											<option value="1">开启</option>
											<option value="2">关闭</option>
										</select>
									</div>
									<div class="form-group">
										<label>服务器绑定端口</label>
										<div class="input-group">
											<input id="SERVER_PORT" type="text" class="form-control">

											<div class="input-group-btn">
												<button id="add-new-event" type="button"
													onclick="setSystem('SERVER_PORT')"
													class="btn btn-primary btn-flat">保存</button>
											</div>
											<!-- /btn-group -->
										</div>
									</div>
									<div class="form-group">
										<label>服务器采集数据间隔时间(单位：秒)</label>
										<div class="input-group">
											<input id="TIME_INTERVAL" type="text" class="form-control">

											<div class="input-group-btn">
												<button id="add-new-event" type="button"
													onclick="setSystem('TIME_INTERVAL')"
													class="btn btn-primary btn-flat">保存</button>
											</div>
											<!-- /btn-group -->
										</div>
									</div>
									<div class="form-group">
										<label>更新临时表定时器</label>
										<div class="box-footer">
											<button type="button" class="btn btn-info " onclick="timerMan('start')">开启</button>
											<button type="button" class="btn btn-default" onclick="timerMan('stop')">停止</button>
										</div>

									</div>

								</form>
							</div>
							<!-- /.box-body -->
						</div>
						<!-- /.box -->
					</div>
					<!--/.col (right) -->
				</div>
				<!-- /.row -->
			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<div class="control-sidebar-bg"></div>
	</div>
	<!-- ./wrapper -->
	<script type="text/javascript">
		selectSysParam();
		function selectSysParam() {
			$
					.ajax({
						url : "system/selectSysParam",
						type : "post",
						dataType : "json",
						success : function(result) {
							var data = result.data;
							for (let i = 0; i < data.length; i++) {
								var paramCode = data[i].paramCode;
								document.getElementById(paramCode).value = data[i].paramValue;
							}
						}
					});
		}
		function setSystem(param) {
			var paramCode = param;
			var paramValue = $("#" + paramCode).val();
			$.ajax({
				url : "system/setSysParam",
				type : "post",
				dataType : "json",
				data : {
					"paramCode" : paramCode,
					"paramValue" : paramValue
				},
				success : function(result) {
					alert("操作成功！");
				}
			});
		}
		function timerMan(param) {
			debugger;
			var url = "timer/" + param;
			$.ajax({
				url : url,
				type : "post",
				dataType : "json",
				success : function(result) {
					alert(result);
				}
			});
		}
	</script>
	<script src="dist/js/app.min.js"></script>
</body>
</html>
