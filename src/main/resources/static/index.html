<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>欢迎登录！</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<!--BootStrap样式-->
	<link type="text/css" href="media/css/bootstrap.min.css" rel="stylesheet" />
	<link type="text/css" href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
	<!--字体样式-->
	<link type="text/css" href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<!--表单元素样式-->
	<link type="text/css" href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>
	<!--表单、页面、图标样式-->
	<link type="text/css" href="media/css/style.css" rel="stylesheet" type="text/css"/>
	<!--页面布局样式-->
	<link type="text/css" href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>
	<!--页面风格样式-->
	<link type="text/css" href="media/css/light.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link type="text/css" href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>
	<!--页面其他组件-->
	<link type="text/css" href="media/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>
	<link type="text/css" href="media/css/daterangepicker.css" rel="stylesheet" type="text/css" />
	<link type="text/css" href="media/css/fullcalendar.css" rel="stylesheet" type="text/css"/>
	<link type="text/css" href="media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen"/>
	<!--统计图样式-->
	<link type="text/css" href="media/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>
</head>
<body class="page-header-fixed">
	<!-- <div class="page-container"> -->
		<!-- 设置侧边栏【开始】 -->
		<div class="page-sidebar nav-collapse collapse">
			<ul class="page-sidebar-menu">
				<li><div class="sidebar-toggler hidden-phone"></div></li>
				<!--设备监控-->
				<li class="active">
					<a href="#">
						<i class="icon-th"></i> 
						<span class="title">监测数据</span>
						<span class="arrow "></span>
					</a>
					<!--二级菜单-->
					<ul class="sub-menu" id="equipments"></ul>
				</li>
			</ul>
			
			<!-- 页面隐藏模态框【开始】-->
			<div id="portlet-config" class="modal hide" style="display: none; width: 200px; height: 200px; margin: auto;">
				<div class="modal-header">
					<button data-dismiss="modal" class="close" type="button" onclick="closeModal();"></button>
					<h3 id="modal-title">模态框标题</h3>
				</div>
				<div id="modal-body" class="modal-body">
					模态框内容
				</div>
			</div>
			<!-- 页面隐藏模态框【结束】-->
		</div>
		<!-- 设置侧边栏【结束】 -->
	<!-- </div> -->
	
	<div class="page-content" id="page-content"></div>
	
	<!-- 页脚区域【开始】 -->
	<div class="footer">
		<div class="footer-inner" style="margin: auto 40%;width: 20%;">
			2018.11.06 &copy; Metronic by laofuzi.
		</div>
		<div class="footer-tools">
			<span class="go-top">
				<i class="icon-angle-up"></i>
			</span>
		</div>
	</div>
	<!-- 页脚区域【结束】 -->
	
	<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
	<script src="media/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="media/js/app.js" type="text/javascript"></script>
	<!-- <script src="media/js/index.js" type="text/javascript"></script> -->
	<script>
		jQuery(document).ready(function() {    
		   App.init(); 
		});
	</script>
	<!-- END JAVASCRIPTS -->
	
	<script type="text/javascript">
		/* 设置全局变量【开始】 */
		var userId = "";						//用户主键
		var menuId = "";					//菜单主键
		//var menuName="";				//菜单名称
		var equiId="";						//设备主键
		/* 设置全局变量【结束】 */
		<!-- 模态框操作【开始】 -->
		var target = document.getElementById("portlet-config");
		//打开模态框
		function openModal(title, url, param){
			if(target.style.display == "none"){
				target.style.display = "block";
				target.style.width = (param.width == null)?("1200px"):(param.width+"px");
				target.style.height = (param.height == null)?("900px"):(param.height+"px");
			}
			equiId=param.equipmentId;
			userId=param.userId;
			//先清空，后载入新页面
			$("#modal-title").html("");
			$("#modal-body").html("");
			$("#modal-title").html(title);
			$("#modal-body").load(url);
		}
		//关闭模态框
		function closeModal(){
			if(target.style.display == "block"){
				target.style.display = "none";
			}
		}
		//拖拽模态框【开始】
		/* var div = document.getElementById("portlet-config");
		var dragFlag = false;
		var x,y;
		div.onmousedown = function (e) {
		    e = e || window.event;
		    x = e.clientX - div.offsetLeft;
		    y = e.clientY - div.offsetTop;
		    dragFlag = true;
		};
		document.onmousemove = function (e) {
		    if (dragFlag) {
		        e = e || window.event;
		        div.style.left = (e.clientX - x) + "px";
		        div.style.top  = (e.clientY - y) + "px";
		    }
		};
		document.onmouseup = function (e) {
		    dragFlag = false;
		}; */
		//拖拽模态框【结束】
		<!-- 模态框操作【结束】 -->
		//组装时间：将时间转化成“yyyy-MM-dd HH:mm:ss”格式的字符串【开始】
		function formatDateToString(param){
			var y = param.getFullYear();
			var M = unifiedFormat(param.getMonth()+1);
			var d = unifiedFormat(param.getDate());
			var H = unifiedFormat(param.getHours());
			var m = unifiedFormat(param.getMinutes());
			var s = unifiedFormat(param.getSeconds());
			var result = y+"-"+M+"-"+d+" "+H+":"+m+":"+s;
			return result;
		}
		function formatInitDateToString(param){
			var y = param.getFullYear();
			var M = unifiedFormat(param.getMonth()+1);
			var d = unifiedFormat(param.getDate());
			var result = y+"-"+M+"-"+d+" 00:00:00";
			return result;
		}
		//统一显示格式
		function unifiedFormat(param){
			return (param<10)?("0"+param):param;
		}
		//组装时间：将时间转化成“yyyy-MM-dd HH:mm:ss”格式的字符串【结束】
		<!-- 获取侧边栏设备列表【开始】 -->
		$.ajax({
			/* url:"equipment/getEquiMenuList", */
			url:"equipment/selectAll",
			type: "post",
			data:{"param":null},
			dataType: "json",
			success: function(result){
				let data = result.data;
				var equiMenu = "";
				equiId=data[0].equipmentId;		//初始化设备主键
				for(let i=0; i<data.length; i++){
					equiMenu+="<li><a href=\"#\" onclick=\"loadContext(' "+data[i].equipmentId+" ');\">"+data[i].equipmentName+"</a></li>"
				}
				$("#equipments").empty();
				$("#equipments").append(equiMenu);
				//初始化页面
				loadContext(equiId);
			}
		});
		<!-- 获取侧边栏设备列表【结束】 -->
		<!-- 关联侧边栏和展示内容【开始】 -->
		function loadContext(param){
			//先清空页面原有内容
			$("#page-content").empty();
			//再引入新的界面
			if(param == 101){
				$("#page-content").load("childrenHtml/user/update-password.html");
			}else if(param == 102){
				$("#page-content").load("childrenHtml/user/user-list.html");
			}else if(param == 201){
				$("#page-content").load("childrenHtml/equipment/equi-list.html");
			}else{
				equiId=param;
				$("#page-content").load("childrenHtml/data/data-list.html");
			}
		}
		<!-- 关联侧边栏和展示内容【结束】 -->
	</script>

</body>
<!-- END BODY -->
</html>